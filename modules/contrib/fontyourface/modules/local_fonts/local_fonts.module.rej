--- modules/local_fonts/local_fonts.module
+++ modules/local_fonts/local_fonts.module
@@ -28,8 +28,8 @@ function local_fonts_page_attachments(&$page) {
     if ($font->pid->value == 'local_fonts') {
       $metadata = $font->getMetadata();
       $font_id = $metadata['id'];
-      $directory = file_build_uri('fontyourface/local_fonts/' . $font_id);
-      $url = file_create_url($directory . '/font.css');
+      $directory = \Drupal::config('system.file')->get('default_scheme') . '://' . 'fontyourface/local_fonts/' . $font_id;
+      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($directory . '/font.css');
       $page['#attached']['html_head'][] = [
         [
           '#type' => 'html_tag',
@@ -100,7 +100,7 @@ function local_fonts_entity_delete(EntityInterface $entity) {
  *   TRUE if files save successfully. Throw any errors otherwise.
  */
 function local_fonts_save_and_generate_css(LocalFontConfigEntity $font_entity) {
-  $directory = file_build_uri('fontyourface/local_fonts/' . $font_entity->id());
+  $directory = \Drupal::config('system.file')->get('default_scheme') . '://' . 'fontyourface/local_fonts/' . $font_entity->id();
   $css_file = $directory . '/font.css';
   $font_file = $directory . '/font.woff';
   \Drupal::service('file_system')->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY | FileSystemInterface::MODIFY_PERMISSIONS);
--- modules/local_fonts/local_fonts.module
+++ modules/local_fonts/local_fonts.module
@@ -29,14 +29,13 @@ function local_fonts_page_attachments(&$page) {
       $metadata = $font->getMetadata();
       $font_id = $metadata['id'];
       $directory = \Drupal::config('system.file')->get('default_scheme') . '://' . 'fontyourface/local_fonts/' . $font_id;
-      $url = \Drupal::service('file_url_generator')->generateAbsoluteString($directory . '/font.css');
       $page['#attached']['html_head'][] = [
         [
           '#type' => 'html_tag',
           '#tag' => 'link',
           '#attributes' => [
             'rel' => 'stylesheet',
-            'href' => file_url_transform_relative($url),
+            'href' => \Drupal::service('file_url_generator')->generateString($directory . '/font.css'),
             'media' => 'all',
           ],
         ], 'local-fonts-' . $font_id,
